<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Login</title>
  <link href="loginstyle.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div id="particles-js">
  <script type = "text/javascript" src = "particles.js"></script>
  <script type = "text/javascript" src = "app.js"></script>
  <div class = "container">
    <form action = "">
      <h2>WELCOME TO </h2>
      <h1 class = "glow"> ENTERTAINMENT EXPO</h1>
      
      <div class = "input-box">
        <span class = "icon">
          <ion-icon name="mail-outline"></ion-icon> 
        </span>
        <input type = "email">
        <label> Email</label>
      </div>
      
      <div class = "input-box">
        <span class = "icon"> 
          <ion-icon name="lock-closed-outline"></ion-icon>
        </span>
        <input type = "password">
        <label> Password </label>
      </div>
      
      <div class = "remember-forgot">
        <label><input type = "checkbox"> Remember me</label>
        <a href = "#"> Forgot Password?</a>
      </div>
      
      <button id="loginBtn">Login</button>
      <div class = "register-link">
        <p> Don't have an account? <a href = "#"> Register here</a></p>
      </div>
      
    </form>
  </div>
  </div>

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script type="module">
    import { signIn, auth, setAuthListeners, logout } from './auth.js';

    let loginBtn = document.querySelector('#loginBtn');
   
   
    function setLoggedInUI(){
    console.log('Setting UI for logged in user...');
    document.querySelector('#loginBtn').innerHTML = 'Logged in Anonymously';
    setTimeout(() => {
        console.log('Redirecting to homepage...');
        window.location.href = 'homepage.html';
    }, 3000);
}

loginBtn.addEventListener('click', async function(event) {
    event.preventDefault();
    const user = await signIn();
    if (user) {
        setLoggedInUI(); 
    } else {
        console.error('Sign-in failed'); 
    }
});

  setAuthListeners(setLoggedInUI);


</script>
</body>

</html>